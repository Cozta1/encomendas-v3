<h1 mat-dialog-title>Detalhes da Encomenda</h1>
<button mat-icon-button (click)="onClose()" class="close-button" aria-label="Fechar diálogo">
  <mat-icon>close</mat-icon>
</button>

<mat-dialog-content>

  <mat-card appearance="outlined" class="info-card">
    <mat-card-content>
      <div class="info-row">
        <mat-icon>person</mat-icon>
        <span><strong>Cliente:</strong> {{encomenda.cliente.nome}}</span>
      </div>
      <div class="info-row">
        <mat-icon>calendar_today</mat-icon>
        <span><strong>Data:</strong> {{encomenda.dataCriacao | date:'dd/MM/yyyy HH:mm'}}</span>
      </div>
      <div class="info-row">
        <mat-icon>info</mat-icon>
        <span><strong>Status:</strong>
          <mat-chip [color]="getStatusColor(encomenda.status)"
                    [ngClass]="{'chip-cancelado': encomenda.status === 'CANCELADO'}"
                    selected>
            {{encomenda.status}}
          </mat-chip>
        </span>
      </div>
      <div class="info-row" *ngIf="encomenda.observacoes">
        <mat-icon>notes</mat-icon>
        <span><strong>Observações:</strong> {{encomenda.observacoes}}</span>
      </div>
    </mat-card-content>
  </mat-card>

  <mat-divider style="margin: 16px 0;"></mat-divider>

  <h3>Itens da Encomenda</h3>
  <mat-list role="list">
    <div *ngFor="let item of encomenda.itens">
      <mat-list-item role="listitem" class="item-list-item">
        <mat-icon matListItemIcon>inventory_2</mat-icon>

        <div matListItemTitle class="item-title-line">
          <span>{{item.produto.nome}}</span>
          <span class="item-subtotal">
            {{item.subtotal | currency:'BRL'}}
          </span>
        </div>

        <div matListItemLine class="item-detail-line">
          <span>
            {{item.quantidade}}x
            <strong class="preco-cotado">{{item.precoCotado | currency:'BRL'}}</strong>
            (Base: {{item.produto.precoBase | currency:'BRL'}})
          </span>
          <span class="item-fornecedor">
            <mat-icon>local_shipping</mat-icon>
            {{item.fornecedor.nome}}
          </span>
        </div>
      </mat-list-item>
      <mat-divider></mat-divider>
    </div>
  </mat-list>

  <div class="total-summary">
    <h2>Total da Encomenda:</h2>
    <h2 class="total-valor">{{encomenda.valorTotal | currency:'BRL'}}</h2>
  </div>

</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-flat-button color="primary" (click)="onClose()">Fechar</button>
</mat-dialog-actions>
